<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ikigai · Carta de tratamientos</title>
  <meta name="description" content="Carta de tratamientos · Ikigai Centro de Masajes" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Brand colors */
      --nogal:#776B5D;
      --albura:#EBE3D5;
      --veta:#1F1F1F;

      /* Derived palette */
      --paper: var(--albura);
      --ink: var(--veta);
      --muted: rgba(31,31,31,.64);
      --muted-2: rgba(31,31,31,.50);
      --line: rgba(31,31,31,.18);
      --line-strong: rgba(31,31,31,.30);
      --wash: rgba(31,31,31,.04);

      --serif:"Playfair Display", Georgia, "Times New Roman", serif;
      --sans:"Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      --max:1120px;
      --px: clamp(16px, 3vw, 28px);

      /* Logo */
      --logo-h: clamp(66px, 7.2vw, 110px);

      /* Unified radius (same as service cards) */
      --radius: 8px;

      /* spacing */
      --gap: 18px;
      --page-top: 22px;

      /* No bottom sticky footer CTA (reservas via modal in header) */
      --cta-h: 0px;
    }

    *{box-sizing:border-box}
    html, body { height: 100%; }
    body{
      margin:0;
      background:var(--paper);
      color:var(--ink);
      font-family:var(--sans);
      text-rendering:optimizeLegibility;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a{color:inherit}
    .wrap{ max-width:var(--max); margin:0 auto; padding:0 var(--px); }

    /* TOP STICKY: LOGO + TABS */
    .top-sticky{
      position:sticky;
      top:0;
      z-index:40;
      background: rgba(235,227,213,.92);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .site-header{ border-bottom:1px solid var(--line); }

    .header-inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:18px 0;
      min-height: calc(var(--logo-h) + 12px);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      min-width: 240px;
    }

    .brand-logo{
      display:block;
      height: var(--logo-h);
      width:auto;
      max-width: 360px;
      filter: none;
    }

    .brand-fallback{
      display:none;
      flex-direction:column;
      line-height:1;
    }
    .brand-fallback .word{
      font-family:var(--serif);
      font-weight:600;
      font-size:28px;
      letter-spacing:.2px;
    }
    .brand-fallback .sub{
      font-size:10px;
      letter-spacing:.18em;
      text-transform:uppercase;
      color:var(--muted);
      margin-top:6px;
    }

    /* Tabs */
    .tabs-bar{
      border-top:0,5px solid var(--line);
      border-bottom:0,5px solid var(--line);
      background: rgba(235,227,213,.76);
    }
    .tabs-inner{
      display:flex;
      gap:10px;
      align-items:center;
      padding:12px 0;
      /* Horizontal scroll for reduced screens */
      overflow-x:auto;
      overflow-y:hidden;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none; /* Firefox */
      scroll-snap-type:x mandatory;
    }
    .tabs-inner::-webkit-scrollbar{ display:none; }
     .tab{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(31,31,31,.04);
      color:var(--nogal);
      border-radius: var(--radius);
      padding:10px 12px;
      font-family:var(--sans);
      font-size:14px;
      font-weight:400;
      cursor:pointer;
      line-height:1;
      white-space:nowrap;
      scroll-snap-align:start;
      transition: background .15s ease, border-color .15s ease;
    }

    /* Fade edges hint when scrolling tabs */
    .tabs-bar{
      position:relative;
    }
    .tabs-bar::before,
    .tabs-bar::after{
      content:"";
      position:absolute;
      top:0;
      bottom:0;
      width:24px;
      pointer-events:none;
      z-index:2;
    }
    .tabs-bar::before{
      left:0;
      background:linear-gradient(to right, rgba(235,227,213,1), rgba(235,227,213,0));
    }
    .tabs-bar::after{
      right:0;
      background:linear-gradient(to left, rgba(235,227,213,1), rgba(235,227,213,0));
    }
    .tab[aria-selected="true"]{
      background: rgba(31,31,31,.08);
      color:#776B5D;
      border-color: var(--nogal);
      font-family:var(--sans);
      font-size:14px;
      font-weight:500;
    }
    .tab:focus-visible{
      outline:4px solid rgba(31,31,31,.28);
      outline-offset:2px;
    }

    /* PAGE */
    main{
      padding: var(--page-top) 0 44px;
      padding-bottom: 44px;
    }

    /* Panels */
    .panel{ display:none; }
    .panel[aria-hidden="false"]{ display:block; }

    /* Grid */
    .grid-3{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap: var(--gap);
      align-items: start;
    }

    /* Cards */
    .card{
      border:1px solid rgba(31,31,31,.28);
      border-radius: var(--radius);
      background: rgba(255,255,255,.06);
      padding:22px 22px 18px;
      box-shadow: 0 0 0 1px rgba(31,31,31,.04) inset;
    }

    /* Featured card (Recomendado) */
    .card-featured{
      border:1px solid rgba(31,31,31,.28);
      box-shadow: none;
    }
    .card-flag{
      display:block;
      font-family:var(--serif);
      font-size:14px;
      color:var(--nogal);
      margin: 2px 0 10px;
    }

    /* Time bars (full width inside card) */
    .time-bar{
      display:grid;
      grid-template-columns:1fr 1fr;
      border-top:1px solid rgba(31,31,31,.28);
      border-bottom:1px solid rgba(31,31,31,.28);
      margin-top:16px;
    }
    .time-bar > div{
      text-align:center;
      padding:10px 0;
      font-family:var(--sans);
      font-size:14px;
      color: var(--ink);
    }
    .time-bar > div + div{
      border-left:1px solid rgba(31,31,31,.28);
    }
    .time-bar.single{
      grid-template-columns:1fr;
    }
    .time-bar.single > div{
      border-left:none;
    }
    /* Bonus info blocks (as rounded bars like reference) */
    .info-grid{
      margin-top:16px;
      display:grid;
      gap:12px;
    }
    .info-row{
      display:grid;
      gap:12px;
    }
    .info-row.two{
      grid-template-columns: auto minmax(0,1fr);
      align-items:stretch;
    }
    .info-cell{
      border:1px solid rgba(31,31,31,.28);
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      padding:12px 16px;
      text-align:center;
      font-family:var(--sans);
      font-weight:400;
      font-size:16px; /* fixed for consistency */
      line-height:1.3;
      color: var(--nogal);
      min-width:0; /* allow wrapping inside grid */
      white-space:normal;
      overflow-wrap:anywhere;
      word-break:normal;
      hyphens:auto;
    }
    .info-cell.compact{
      font-weight:400;
    }

    @media (max-width: 820px){
      .reserve-grid{ grid-template-columns:1fr; }

      .info-row.two{ grid-template-columns: 1fr; }
    }

    @media (max-width: 560px){
      .info-cell{ padding:14px 12px; }
    }

/* Headings */

    .h3{
      font-family:var(--serif);
      font-weight:400;
      font-size:28px;
      line-height:1.08;
      margin:0 0 10px;
      color: var(--ink);
    }
    .h3.big{ font-size:28px; }

    .p{
      font-size:14px;
      line-height:1.75;
      margin:0 0 14px;
      max-width:62ch;
      color: var(--ink);
    }

    .meta{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-top:10px;
      color:var(--muted);
      font-size:13px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      padding:8px 10px;
      border-radius: var(--radius);
      border:1px solid var(--line);
      background: rgba(31,31,31,.03);
      font-size:14px;
      color: #1f1f1f;
      white-space:nowrap;
    }

    .choice{
      font-family:var(--serif);
      font-style:medium;
      color:#1f1f1f;
      font-size:14px;
    }

    /* Ritual includes */
    .includes{
      margin-top:12px;
      border-top:1px solid var(--line);
      padding-top:12px;
    }
    .includes-title{
      font-family:var(--serif);
      font-size:16px;
      letter-spacing:.02em;
      text-transform:none;
      color:var(--muted);
      margin-bottom:10px;
      font-weight:500;
    }
    .includes-row{
      font-family:var(--serif);
      display:flex;
      justify-content:space-between;
      gap:15px;
      padding:8px 0;
      border-bottom:1px solid var(--line);
      font-size:16px;
      line-height:1.6;
    }
    .includes-row:last-child{ border-bottom:none; }
    .includes-row strong{ font-weight:600; color:var(--ink); }
    .includes-time{ font-family:var(--sans); font-size:14px; color:var(--muted); white-space:nowrap; }

    /* Inline note next to "Masaje relajante" (same line) */
    .inline-note{
      font-family: var(--serif);
      font-style: italic;
      color: var(--muted-2);
      font-size: 13px;
      margin-left: 6px;
      white-space: nowrap;
    }

    /* BONO card */
    .bonus-title{
      font-family:var(--serif);
      font-weight:400;
      font-size:28px;
      margin:0 0 10px;
    }
    .divider{
      height:1px;
      background:var(--line);
      margin:18px 0;
    }
    .cond-title{
      font-family:var(--serif);
      font-style:italic;
      color:var(--ink);
      margin:0 0 10px;
    }
    .bullets{
      margin:0;
      padding-left:18px;
      color:var(--ink);
      font-size:14px;
      line-height:1.75;
    }

    /* Buttons */
    .cta-btn{
      font-family:var(--sans);
      font-size:14px;
      font-weight:500;
      padding:8px 16px;
      border-radius: var(--radius);
      border:1px solid var(--line-strong);
      text-decoration:none;
      color:var(--ink);
      background:transparent;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-height:44px;
      width:100%;
      white-space:nowrap;
    }
    .cta-btn.primary{
      background: var(--nogal);
      color: var(--albura);
      border-color: var(--nogal);
    }

    /* Header reserve button */
    .reserve-btn{
      width:auto;
      padding:8px 12px;
      min-height:2px;
    }

    /* Modal */
    .modal{
      position:fixed;
      inset:0;
      z-index:80;
      display:none;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .modal[aria-hidden="false"]{ display:flex; }
    .modal-backdrop{
      position:absolute;
      inset:0;
      background: rgba(31,31,31,.55);
      backdrop-filter: blur(6px);
    }
    .modal-card{
      position:relative;
      width:min(520px, 100%);
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.22);
      background: rgba(235,227,213,.98);
      box-shadow: 0 18px 50px rgba(0,0,0,.28);
      padding:20px;
    }
    .modal-title{
      font-family: var(--serif);
      font-weight:600;
      font-size:22px;
      margin:0 0 10px;
    }
    .modal-body{
      margin:0 0 16px;
      color: var(--muted);
      font-size:14px;
      line-height:1.6;
    }
    .modal-actions{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      align-items:center;
    }
    .modal-close{
      appearance:none;
      border:0;
      background: transparent;
      position:absolute;
      top:10px;
      right:10px;
      width:36px;
      height:36px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      cursor:pointer;
    }
    .modal-close:hover{ background: rgba(31,31,31,.06); }
    .modal-close:focus-visible{
      outline:4px solid rgba(31,31,31,.28);
      outline-offset:2px;
    }
    .x{
      width:14px;
      height:14px;
      position:relative;
    }
    .x::before,
    .x::after{
      content:"";
      position:absolute;
      top:50%;
      left:0;
      right:0;
      height:2px;
      background: rgba(31,31,31,.65);
      transform-origin:center;
    }
    .x::before{ transform: translateY(-50%) rotate(45deg); }
    .x::after{ transform: translateY(-50%) rotate(-45deg); }


    /* Reserve form (service/day/time) */
    .reserve-form{ margin: 12px 0 14px; }
    .rf{ display:block; margin: 10px 0; }
    .rf > span{
      display:block;
      font-size:12px;
      color: var(--muted);
      margin-bottom:6px;
    }
    .rf select, .rf input{
      width:100%;
      border:1px solid var(--line-strong);
      border-radius: var(--radius);
      background: rgba(255,255,255,.18);
      padding:10px 12px;
      font-family: var(--sans);
      font-size:14px;
      color: var(--ink);
    }
    .reserve-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .reserve-hint{
      margin: 10px 0 0;
      font-size:13px;
      color: var(--muted);
      line-height:1.5;
    }

    /* Responsive */
    @media (max-width: 980px){
      .grid-3{ grid-template-columns:1fr; gap:14px; }
      .card{ padding:18px 18px 16px; border-radius: var(--radius); }
      .h3{ font-size:26px; }
      .h3.big{ font-size:28px; }
      .header-inner{ padding:14px 0; }
    }

    @media (max-width: 820px){
      .reserve-grid{ grid-template-columns:1fr; }

      .header-inner{ flex-wrap:wrap; }
      .tab{ flex:0 0 auto; }
      .modal-actions{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>

<!-- TOP STICKY (logo + tabs) -->
<div class="top-sticky">
  <header class="site-header">
    <div class="wrap">
      <div class="header-inner">
        <div class="brand">
          <img
            class="brand-logo"
            src="./assets/images//Ikigai_Imagotipo-Horizontal-Color-Negativo-SF.svg"
            alt="Ikigai · Centro de Masajes"
            loading="eager"
            decoding="async"
            onerror="this.style.display='none'; document.querySelector('.brand-fallback').style.display='flex';"
          />
          <div class="brand-fallback">
            <span class="word">ikigai</span>
            <span class="sub">CENTRO DE MASAJES</span>
          </div>
        </div>

        <button class="cta-btn primary reserve-btn" type="button" id="open-reserve" aria-haspopup="dialog" aria-controls="reserve-modal">
          Reservar
        </button>
      </div>
    </div>
  </header>

  <div class="tabs-bar" role="tablist" aria-label="Secciones de la carta">
    <div class="wrap">
      <div class="tabs-inner">
        <button class="tab" role="tab" id="tab-masajes" aria-selected="true" aria-controls="panel-masajes" type="button" tabindex="0">
          Masajes terapéuticos
        </button>
        <button class="tab" role="tab" id="tab-rituales" aria-selected="false" aria-controls="panel-rituales" type="button" tabindex="-1">
          Rituales
        </button>
        <button class="tab" role="tab" id="tab-bonos" aria-selected="false" aria-controls="panel-bonos" type="button" tabindex="-1">
          Bonos
        </button>
      </div>
    </div>
  </div>
</div>

<main>
  <div class="wrap">

    <!-- MASAJES -->
    <section class="panel" id="panel-masajes" role="tabpanel" aria-labelledby="tab-masajes" aria-hidden="false">
      <div class="grid-3">

        <article class="card">
          <h3 class="h3">Masaje relajante Ikigai</h3>
          <div class="includes"></div>
          <p class="p">
            Masaje suave y armonioso, ayuda a liberar el estrés, calmar la mente y relajar el cuerpo,
            mejorando el descanso y recuperando la sensación de bienestar y equilibrio.
          </p>
          <div class="time-bar">
            <div>30 min</div>
            <div>50 min</div>
          </div>
</article>

        <article class="card card-featured">
          <span class="card-flag">Recomendado</span>
          <h3 class="h3">Masaje de Tejido profundo</h3>
                    <div class="includes"></div>
          <p class="p">
            Masaje enfocado en las capas más profundas del músculo, diseñado para liberar tensiones,
            rigidez y nudos musculares. Ayuda a aliviar molestias persistentes, mejorar la movilidad y
            devolver al cuerpo una sensación de ligereza.
          </p>
          <div class="time-bar">
            <div>30 min</div>
            <div>50 min</div>
          </div>
</article>

        <article class="card">
          <h3 class="h3">Masaje Californiano</h3>
          <div class="includes"></div>
          <p class="p">
            Masaje fluido y envolvente, conocido como una danza sanadora, que favorece la conexión
            cuerpo-mente, ayudando a soltar tensiones físicas y emocionales y a entrar en un profundo
            estado de relajación.
          </p>
          <div class="time-bar single">
            <div>50 min</div>
          </div>
</article>

        <article class="card">
          <h3 class="h3">Masaje con piedras calientes</h3>
          <div class="includes"></div>
          <p class="p">
            Masaje relajante que combina suaves movimientos con la aplicación de piedras volcánicas
            sobre puntos estratégicos del cuerpo. Ayuda a soltar tensiones acumuladas, relajar la
            musculatura y revitalizar la energía.
          </p>
          <div class="time-bar single">
            <div>60 min</div>
          </div>
</article>

        <article class="card">
          <h3 class="h3">Masaje craneal Hindú</h3>
          <div class="includes"></div>
          <p class="p">
            Masaje tradicional de la India que combina presión y movimientos ágiles sobre cabeza,
            cuello y hombros, ayuda a aliviar tensiones, reducir dolores de cabeza y estrés acumulado.
          </p>
          <div class="time-bar single">
            <div>30 min</div>
          </div>
</article>

        <article class="card">
          <h3 class="h3">Reflexología + Masaje de pies</h3>
          <div class="includes"></div>
          <p class="p">
            Tratamiento que combina la estimulación de puntos reflejos con un masaje profundo de pies,
            ayudando a liberar tensiones, mejorar la circulación y favorecer el equilibrio natural del
            cuerpo, proporcionando una sensación de ligereza y renovación.
          </p>
          <div class="time-bar single">
            <div>40 min</div>
          </div>
</article>

      </div>
    </section>

    <!-- RITUALES -->
    <section class="panel" id="panel-rituales" role="tabpanel" aria-labelledby="tab-rituales" aria-hidden="true">
      <div class="grid-3">

        <article class="card">
          <h3 class="h3">Ritual Ikigai</h3>
          <div class="includes">
            <div class="includes-title">Incluye</div>

            <div class="includes-row">
              <div><strong>Bañera de Hidromasaje<br><span>con aromaterapia</span></strong></div>
              <div class="includes-time">30 min</div>
            </div>

            <div class="includes-row">
              <div><strong>Masaje a elegir:</strong><br>Relajado o de Tejido profundo</div>
              <div class="includes-time">50 min</div>
            </div>

            <div class="includes-row">
              <div><strong>Tratamiento final a elegir:</strong><br>Mini facial o Masaje de pies</div>
              <div class="includes-time">30 min</div>
            </div>
          </div>
        </article>

        <article class="card">
          <h3 class="h3">Ritual <em>Exprés</em> Ikigai</h3>
          <div class="includes">
            <div class="includes-title">Incluye</div>

            <div class="includes-row">
              <div><strong>Bañera de Hidromasaje</strong></div>
              <div class="includes-time">25 min</div>
            </div>

            <div class="includes-row">
              <div><strong>Masaje relajante localizado:</strong><br>espalda o piernas</div>
              <div class="includes-time">25 min</div>
            </div>
          </div>
        </article>

        <article class="card">
          <h3 class="h3">Ritual Ikigai <em>en pareja</em></h3>
          <div class="includes">
            <div class="includes-title">Incluye</div>

            <div class="includes-row">
              <div><strong>Bañera de Hidromasaje<br><span>con aromaterapia</span></strong></div>
              <div class="includes-time">40 min</div>
            </div>

            <!-- Same line note -->
            <div class="includes-row">
              <div>
                <strong>Masaje relajante</strong><br><span style="color:var(--muted)">(Masajes realizados de forma consecutiva,</span> <br><span style="color:var(--muted)"> no simultánea)</span>
              </div>
              <div class="includes-time">25 min p/p</div>
            </div>

            <div class="includes-row">
              <div><strong>Bombones y Cava</strong> <span style="color:var(--muted)">(Incluidos)</span></div>
              <div class="includes-time"></div>
            </div>
          </div>
        </article>

      </div>
    </section>

    <!-- BONOS -->
    <section class="panel" id="panel-bonos" role="tabpanel" aria-labelledby="tab-bonos" aria-hidden="true">
      <div class="grid-3" style="grid-template-columns:1fr; max-width:820px;">
        <article class="card">
          <h3 class="h3">Bono mensual</h3>
          <div class="includes"></div>

          <p class="p">
            Este bono está pensado para personas que sienten tensión y sobrecarga corporal que desean un espacio regular de cuidado.
          </p>
          <p class="p">
            La continuidad de las sesiones favorece una mayor sensación de bienestar, ligereza y equilibrio, respetando siempre el ritmo del cuerpo
          </p>

          <div class="divider"></div>

          <div class="info-grid" aria-label="Detalle del bono">
                   
                      <div class="info-row two">
                        <div class="info-cell">4 sesiones</div>
              <div class="info-cell">Masaje de Tejido profundo (50 min por sesión)</div>
              
            </div>
           
          </div>

          <div class="divider"></div>

          <div class="cond-title">Condiciones</div>
          <ul class="bullets">
            <li>Bono personal e intransferible.</li>
            <li>Reserva previa.</li>
            <li>Validez de 1 mes.</li>
          </ul>
        </article>
      
        <article class="card">
          <h3 class="h3">Bono regalo</h3>
          <div class="includes"></div>

          <p class="p">
Este bono regalo está pensado para ofrecer una experiencia de cuidado y bienestar, un momento de pausa y conexión con el cuerpo en un entorno tranquilo y respetuoso.          </p>
          <p class="p">
Con este bono regalo podrás elegir entre todos los servicios disponibles o combinarlos entre sí, adaptando la experiencia a las necesidades y preferencias de cada persona.          </p>
          
          <div class="divider"></div>

          <div class="info-grid" aria-label="Detalle del bono">
            <div class="info-row">
              <div class="info-cell">Personalízalo en el momento de la reserva</div>
            </div>
          </div>

          <div class="divider"></div>

          <div class="cond-title">Condiciones</div>
          <ul class="bullets">
            <li>Bono personal e intransferible.</li>
            <li>Reserva previa obligatoria.</li>
            <li>Validez de 1 año.</li>
          </ul>
        </article>
        </div>
    </section>

  </div>
</main>

<!-- Reserve modal -->
<div class="modal" id="reserve-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="reserve-title">
  <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card" role="document">
    <button class="modal-close" type="button" aria-label="Cerrar" data-close="true">
      <span class="x" aria-hidden="true"></span>
    </button>

    <h2 class="modal-title" id="reserve-title">Reservar</h2>
    <p class="modal-body">Selecciona el servicio y una preferencia de día y hora. Confirmaremos disponibilidad.</p>

    <div class="reserve-form" aria-label="Preferencias de reserva">
      <label class="rf">
        <span>Servicio</span>
        <select id="rf-service">
          <option value="" selected disabled>Selecciona un servicio</option>
          <option>Masaje relajante Ikigai</option>
          <option>Masaje de Tejido profundo</option>
          <option>Masaje Californiano</option>
          <option>Masaje con piedras calientes</option>
          <option>Masaje craneal Hindú</option>
          <option>Reflexología + Masaje de pies</option>
          <option>Ritual Ikigai</option>
          <option>Ritual Exprés Ikigai</option>
          <option>Ritual Ikigai en pareja</option>
          <option>Bono mensual</option>
          <option>Bono regalo</option>
        </select>
      </label>

      <div class="reserve-grid">
        <label class="rf">
          <span>Día</span>
          <input id="rf-day" type="date" />
        </label>

        <label class="rf">
          <span>Hora</span>
          <select id="rf-time">
            <option value="" selected disabled>Elige una hora</option>
            <option>10:00</option><option>10:30</option><option>11:00</option><option>11:30</option>
            <option>12:00</option><option>12:30</option><option>13:00</option>
            <option>17:00</option><option>17:30</option><option>18:00</option><option>18:30</option>
            <option>19:00</option><option>19:30</option><option>20:00</option>
          </select>
        </label>
      </div>

      <p class="reserve-hint" id="rf-hint" aria-live="polite"></p>
    </div>

    <div class="modal-actions">
      <a class="cta-btn primary" id="reserve-whatsapp" href="#" target="_blank" rel="noopener">
        Reservar por WhatsApp
      </a>
      <a class="cta-btn" id="reserve-email" href="#">
        Reservar por correo
      </a>
    </div>
  </div>
</div>

<script>
  (function(){
    const tabs = Array.from(document.querySelectorAll('[role="tab"]'));
    const panels = tabs.map(t => document.getElementById(t.getAttribute('aria-controls')));

    function setActive(tab){
      tabs.forEach((t, i) => {
        const active = (t === tab);
        t.setAttribute('aria-selected', active ? 'true' : 'false');
        t.setAttribute('tabindex', active ? '0' : '-1');
        panels[i].setAttribute('aria-hidden', active ? 'false' : 'true');
      });

      const id = tab.id.replace('tab-','');
      history.replaceState(null, '', '#' + id);
    }

    tabs.forEach(t => {
      t.addEventListener('click', () => setActive(t));
      t.addEventListener('keydown', (e) => {
        const idx = tabs.indexOf(t);
        if(e.key === 'ArrowRight'){ e.preventDefault(); tabs[(idx+1)%tabs.length].focus(); }
        if(e.key === 'ArrowLeft'){ e.preventDefault(); tabs[(idx-1+tabs.length)%tabs.length].focus(); }
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); setActive(t); }
      });
    });

    const hash = (location.hash || '').replace('#','').trim();
    if(hash){
      const target = document.getElementById('tab-' + hash);
      if(target) setActive(target);
    }
  })();
</script>

<script>
  (function(){
    const openBtn = document.getElementById('open-reserve');
    const modal = document.getElementById('reserve-modal');
    const focusablesSelector = 'a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';
    let lastActive = null;

    // TODO: Replace with the real WhatsApp number in international format, without "+"
    // Example Spain: 346XXXXXXXX
    const PHONE_NUMBER = "34695752476";
    const EMAIL = "centroikigai.masajes@gmail.com";

    const get = (id) => document.getElementById(id);

    function formatDateES(iso){
      if(!iso) return "";
      const [y,m,d] = iso.split('-').map(Number);
      if(!y || !m || !d) return iso;
      return `${String(d).padStart(2,'0')}/${String(m).padStart(2,'0')}/${y}`;
    }

    function buildMessage(){
      const service = get('rf-service')?.value || "";
      const day = formatDateES(get('rf-day')?.value || "");
      const time = get('rf-time')?.value || "";

      const lines = ["Hola, me gustaría reservar:"];
      if(service) lines.push(`• Servicio: ${service}`);
      if(day) lines.push(`• Día: ${day}`);
      if(time) lines.push(`• Hora: ${time}`);
      lines.push("Gracias.");
      return lines.join("\n");
    }

    function updateLinks(){
      const msg = buildMessage();
      const encoded = encodeURIComponent(msg);

      // WhatsApp
      const waURL = `https://wa.me/${PHONE_NUMBER}?text=${encoded}`;
      get('reserve-whatsapp')?.setAttribute('href', waURL);

      // Email
      const subject = encodeURIComponent("Reserva · Ikigai");
      const mailURL = `mailto:${EMAIL}?subject=${subject}&body=${encoded}`;
      get('reserve-email')?.setAttribute('href', mailURL);

      // Hint
      const hasAny = Boolean(get('rf-service')?.value || get('rf-day')?.value || get('rf-time')?.value);
      const hint = get('rf-hint');
      if(hint){
        hint.textContent = hasAny
          ? "El mensaje se completará automáticamente con tu selección."
          : "Puedes completar solo lo que sepas. Confirmaremos disponibilidad por WhatsApp o correo.";
      }
    }

    function openModal(){
      lastActive = document.activeElement;
      modal.setAttribute('aria-hidden','false');
      updateLinks();
      const first = modal.querySelector(focusablesSelector);
      if(first) first.focus();
      document.body.style.overflow = 'hidden';
    }

    function closeModal(){
      modal.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      if(lastActive && typeof lastActive.focus === 'function') lastActive.focus();
    }

    openBtn?.addEventListener('click', openModal);

    modal.addEventListener('click', (e) => {
      const target = e.target;
      if(target && target.dataset && target.dataset.close === 'true') closeModal();
    });

    document.addEventListener('keydown', (e) => {
      if(modal.getAttribute('aria-hidden') === 'false'){
        if(e.key === 'Escape') closeModal();
        if(e.key === 'Tab'){
          const focusables = Array.from(modal.querySelectorAll(focusablesSelector)).filter(el => el.offsetParent !== null);
          if(focusables.length === 0) return;
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          if(e.shiftKey && document.activeElement === first){
            e.preventDefault();
            last.focus();
          } else if(!e.shiftKey && document.activeElement === last){
            e.preventDefault();
            first.focus();
          }
        }
      }
    });

    // Live updates while modal is open
    document.addEventListener('change', (e) => {
      if(modal.getAttribute('aria-hidden') !== 'false') return;
      if(['rf-service','rf-day','rf-time'].includes(e.target.id)) updateLinks();
    });
  })();
</script>

</body>
</html>
